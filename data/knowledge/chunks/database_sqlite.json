{
  "chunks": [
    {
      "id": "database_sqlite_001",
      "content": "SQLite Database Schema Best Practices:\n\n```sql\n-- Enable foreign keys (must be done per connection)\nPRAGMA foreign_keys = ON;\n\n-- ========== USERS TABLE ==========\nCREATE TABLE IF NOT EXISTS users (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    email TEXT NOT NULL UNIQUE,\n    password_hash TEXT NOT NULL,\n    display_name TEXT,\n    is_active BOOLEAN DEFAULT 1,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_users_email ON users(email);\n\n-- ========== TASKS TABLE ==========\nCREATE TABLE IF NOT EXISTS tasks (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    user_id INTEGER NOT NULL,\n    title TEXT NOT NULL,\n    description TEXT,\n    priority TEXT CHECK(priority IN ('low', 'medium', 'high')) DEFAULT 'medium',\n    status TEXT CHECK(status IN ('pending', 'in_progress', 'completed', 'cancelled')) DEFAULT 'pending',\n    due_date DATE,\n    completed_at TIMESTAMP,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \n    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n);\n\nCREATE INDEX idx_tasks_user ON tasks(user_id);\nCREATE INDEX idx_tasks_status ON tasks(status);\nCREATE INDEX idx_tasks_due_date ON tasks(due_date);\n\n-- ========== TRIGGER FOR updated_at ==========\nCREATE TRIGGER update_tasks_timestamp \n    AFTER UPDATE ON tasks\nBEGIN\n    UPDATE tasks SET updated_at = CURRENT_TIMESTAMP WHERE id = NEW.id;\nEND;\n\nCREATE TRIGGER update_users_timestamp\n    AFTER UPDATE ON users\nBEGIN\n    UPDATE users SET updated_at = CURRENT_TIMESTAMP WHERE id = NEW.id;\nEND;\n\n-- ========== USEFUL QUERIES ==========\n\n-- Get user's tasks ordered by priority and due date\nSELECT * FROM tasks \nWHERE user_id = ? AND status != 'completed'\nORDER BY \n    CASE priority WHEN 'high' THEN 1 WHEN 'medium' THEN 2 ELSE 3 END,\n    due_date ASC NULLS LAST;\n\n-- Get overdue tasks\nSELECT * FROM tasks\nWHERE user_id = ? \n    AND status NOT IN ('completed', 'cancelled')\n    AND due_date < DATE('now');\n\n-- Task statistics\nSELECT \n    status,\n    COUNT(*) as count,\n    priority\nFROM tasks\nWHERE user_id = ?\nGROUP BY status, priority;\n```\n\nSQLITE TIPS:\n- Use TEXT for strings (no VARCHAR in SQLite)\n- BOOLEAN is stored as INTEGER (0/1)\n- Use CHECK constraints for enums\n- Create indexes on frequently queried columns\n- Use AUTOINCREMENT for primary keys\n- Enable foreign_keys pragma per connection\n- Use triggers for updated_at timestamps",
      "category": "database",
      "subcategory": "sqlite",
      "tags": [
        "sqlite",
        "sql",
        "database",
        "schema",
        "tasks",
        "best-practices"
      ],
      "source": "local",
      "source_url": null,
      "created_at": "2026-01-28T14:19:13.537396"
    }
  ]
}